<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>DataBaseModule</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_DataBaseModule.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/DataBaseModule.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>Copyright (C) 2017 Johannes Hartmann</td></tr><tr><th>License</th><td>MIT</td></tr><tr><th>Maintainer</th><td>Johannes Hartmann &lt;ec17512@qmul.ac.uk&gt;</td></tr><tr><th>Stability</th><td>stable</td></tr><tr><th>Portability</th><td>portable</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">DataBaseModule</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module handles all database related parts of the application.</p><p>Written by Johannes Hartmann</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:dbConnect">dbConnect</a> :: IO Connection</li><li class="src short"><a href="#v:initialiseDB">initialiseDB</a> :: Connection -&gt; IO ()</li><li class="src short"><a href="#v:clearDatabase">clearDatabase</a> :: Connection -&gt; IO ()</li><li class="src short"><a href="#v:cleanupDatabase">cleanupDatabase</a> :: Connection -&gt; String -&gt; IO ()</li><li class="src short"><a href="#v:disconnectDB">disconnectDB</a> :: Connection -&gt; IO ()</li><li class="src short"><a href="#v:insertMovieIntoDB">insertMovieIntoDB</a> :: Connection -&gt; [<a href="DataStructures.html#t:Movie">Movie</a>] -&gt; IO ()</li><li class="src short"><a href="#v:insertActorIntoDB">insertActorIntoDB</a> :: Connection -&gt; [<a href="DataStructures.html#t:Actor">Actor</a>] -&gt; IO ()</li><li class="src short"><a href="#v:searchMoviesInDB">searchMoviesInDB</a> :: Connection -&gt; String -&gt; IO (Maybe [<a href="DataStructures.html#t:Movie">Movie</a>])</li><li class="src short"><a href="#v:getMoviesFromDatabase">getMoviesFromDatabase</a> :: Connection -&gt; IO [<a href="DataStructures.html#t:Movie">Movie</a>]</li><li class="src short"><a href="#v:getActorsFromDatabase">getActorsFromDatabase</a> :: Connection -&gt; IO [<a href="DataStructures.html#t:Actor">Actor</a>]</li><li class="src short"><a href="#v:getDateOfLastMoveInDB">getDateOfLastMoveInDB</a> :: Connection -&gt; IO (Maybe String)</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:dbConnect" class="def">dbConnect</a> :: IO Connection <a href="src/DataBaseModule.html#dbConnect" class="link">Source</a> <a href="#v:dbConnect" class="selflink">#</a></p><div class="doc"><p>Establishes the connection to the movie database</p></div></div><div class="top"><p class="src"><a id="v:initialiseDB" class="def">initialiseDB</a> :: Connection -&gt; IO () <a href="src/DataBaseModule.html#initialiseDB" class="link">Source</a> <a href="#v:initialiseDB" class="selflink">#</a></p><div class="doc"><p>Given a connection to a database this function creates all the necessary
     tables if they don't already exist  </p></div></div><div class="top"><p class="src"><a id="v:clearDatabase" class="def">clearDatabase</a> :: Connection -&gt; IO () <a href="src/DataBaseModule.html#clearDatabase" class="link">Source</a> <a href="#v:clearDatabase" class="selflink">#</a></p><div class="doc"><p>drops all tables in the database</p></div></div><div class="top"><p class="src"><a id="v:cleanupDatabase" class="def">cleanupDatabase</a> :: Connection -&gt; String -&gt; IO () <a href="src/DataBaseModule.html#cleanupDatabase" class="link">Source</a> <a href="#v:cleanupDatabase" class="selflink">#</a></p><div class="doc"><p>removes all movies before a given date and deals with inconsistent states in the
     database after the deletion of a movie</p></div></div><div class="top"><p class="src"><a id="v:disconnectDB" class="def">disconnectDB</a> :: Connection -&gt; IO () <a href="src/DataBaseModule.html#disconnectDB" class="link">Source</a> <a href="#v:disconnectDB" class="selflink">#</a></p><div class="doc"><p>Closes the database connection</p></div></div><div class="top"><p class="src"><a id="v:insertMovieIntoDB" class="def">insertMovieIntoDB</a> :: Connection -&gt; [<a href="DataStructures.html#t:Movie">Movie</a>] -&gt; IO () <a href="src/DataBaseModule.html#insertMovieIntoDB" class="link">Source</a> <a href="#v:insertMovieIntoDB" class="selflink">#</a></p><div class="doc"><p>Inserts a given list of movies into the movies table</p></div></div><div class="top"><p class="src"><a id="v:insertActorIntoDB" class="def">insertActorIntoDB</a> :: Connection -&gt; [<a href="DataStructures.html#t:Actor">Actor</a>] -&gt; IO () <a href="src/DataBaseModule.html#insertActorIntoDB" class="link">Source</a> <a href="#v:insertActorIntoDB" class="selflink">#</a></p><div class="doc"><p>Inserts a given list of actors into the actors table and fills the plays
     relation table with all actor-movie connections </p></div></div><div class="top"><p class="src"><a id="v:searchMoviesInDB" class="def">searchMoviesInDB</a> :: Connection -&gt; String -&gt; IO (Maybe [<a href="DataStructures.html#t:Movie">Movie</a>]) <a href="src/DataBaseModule.html#searchMoviesInDB" class="link">Source</a> <a href="#v:searchMoviesInDB" class="selflink">#</a></p><div class="doc"><p>Looks up all movies a given actor plays in and returns a maybe list of movies.
     The Maybe will return Nothing if there is no movie for a given actor </p></div></div><div class="top"><p class="src"><a id="v:getMoviesFromDatabase" class="def">getMoviesFromDatabase</a> :: Connection -&gt; IO [<a href="DataStructures.html#t:Movie">Movie</a>] <a href="src/DataBaseModule.html#getMoviesFromDatabase" class="link">Source</a> <a href="#v:getMoviesFromDatabase" class="selflink">#</a></p><div class="doc"><p>looks up all movies in the database and returns a list of all actors</p></div></div><div class="top"><p class="src"><a id="v:getActorsFromDatabase" class="def">getActorsFromDatabase</a> :: Connection -&gt; IO [<a href="DataStructures.html#t:Actor">Actor</a>] <a href="src/DataBaseModule.html#getActorsFromDatabase" class="link">Source</a> <a href="#v:getActorsFromDatabase" class="selflink">#</a></p><div class="doc"><p>looks up all actors in the database and returns a list of all actors</p></div></div><div class="top"><p class="src"><a id="v:getDateOfLastMoveInDB" class="def">getDateOfLastMoveInDB</a> :: Connection -&gt; IO (Maybe String) <a href="src/DataBaseModule.html#getDateOfLastMoveInDB" class="link">Source</a> <a href="#v:getDateOfLastMoveInDB" class="selflink">#</a></p><div class="doc"><p>returns the date of the newest movie in the Database</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.2</p></div></body></html>